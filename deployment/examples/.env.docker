# Orkee Docker Environment Configuration
# For use with Docker Compose deployments

# Docker Image Configuration
ORKEE_IMAGE=orkee:latest
ORKEE_DEV_IMAGE=orkee:dev
NGINX_IMAGE=nginx:alpine
POSTGRES_IMAGE=postgres:15-alpine
REDIS_IMAGE=redis:7-alpine
CERTBOT_IMAGE=certbot/certbot

# Container Names
ORKEE_CONTAINER=orkee-app
ORKEE_DEV_CONTAINER=orkee-dev
DASHBOARD_CONTAINER=orkee-dashboard-dev
NGINX_CONTAINER=orkee-nginx
POSTGRES_CONTAINER=orkee-postgres
REDIS_CONTAINER=orkee-redis
CERTBOT_CONTAINER=orkee-certbot

# Network Configuration
NETWORK_NAME=orkee-network
DEV_NETWORK_NAME=orkee-dev-network
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# Port Mapping (Host:Container)
# Production Ports
ORKEE_HTTP_PORT=4000:4000
ORKEE_HTTPS_PORT=4001:4001
NGINX_HTTP_PORT=80:80
NGINX_HTTPS_PORT=443:443

# Development Ports
ORKEE_DEV_PORT=4001:4001
DASHBOARD_DEV_PORT=5173:5173
DEBUG_PORT=8080:8080

# Database Ports (if enabled)
POSTGRES_PORT=5432:5432
REDIS_PORT=6379:6379

# Volume Paths (Host paths for bind mounts)
DATA_DIR=./data
CERTS_DIR=./certs
LOGS_DIR=./logs

# Nginx Volumes
NGINX_LOGS_DIR=./nginx-logs
NGINX_CONF_DIR=./deployment/nginx

# Let's Encrypt Volumes
LETSENCRYPT_DIR=./letsencrypt
LETSENCRYPT_WWW_DIR=./letsencrypt-www

# Build Arguments
BUILDKIT_INLINE_CACHE=1
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Resource Limits
# Orkee Resource Limits
ORKEE_CPU_LIMIT=2.0
ORKEE_MEMORY_LIMIT=1G
ORKEE_CPU_RESERVATION=0.5
ORKEE_MEMORY_RESERVATION=256M

# Nginx Resource Limits
NGINX_CPU_LIMIT=0.5
NGINX_MEMORY_LIMIT=256M
NGINX_CPU_RESERVATION=0.1
NGINX_MEMORY_RESERVATION=64M

# Database Resource Limits (if using)
POSTGRES_CPU_LIMIT=1.0
POSTGRES_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=256M

# Restart Policies
RESTART_POLICY=unless-stopped
RESTART_DELAY=10s
RESTART_MAX_ATTEMPTS=3
RESTART_WINDOW=60s

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_START_PERIOD=30s
HEALTH_CHECK_RETRIES=3

# Development Health Checks (faster)
DEV_HEALTH_CHECK_INTERVAL=10s
DEV_HEALTH_CHECK_START_PERIOD=20s

# Logging Configuration
LOG_DRIVER=json-file
LOG_MAX_SIZE=10m
LOG_MAX_FILE=3
DEV_LOG_MAX_SIZE=100m
DEV_LOG_MAX_FILE=1

# Security Configuration
DOCKER_USER_ID=1000
DOCKER_GROUP_ID=1000
SECURITY_OPT=no-new-privileges:true

# Domain Configuration (for SSL/Nginx)
DOMAIN=localhost
EMAIL=admin@localhost

# Environment-Specific Overrides
COMPOSE_PROJECT_NAME=orkee
COMPOSE_FILE=deployment/docker/docker-compose.yml
DEV_COMPOSE_FILE=deployment/docker/docker-compose.dev.yml

# Database Configuration (if enabling PostgreSQL)
POSTGRES_DB=orkee_prod
POSTGRES_USER=orkee
POSTGRES_PASSWORD=change_this_password
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=C --lc-ctype=C

# Redis Configuration (if enabling Redis)
REDIS_PASSWORD=change_this_password
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# Backup Configuration
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_VOLUME=orkee-backups

# Monitoring
ENABLE_CONTAINER_MONITORING=true
METRICS_PORT=9090